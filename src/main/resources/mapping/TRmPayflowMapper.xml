<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.gd.datachx.mapper.TRmPayflowMapper" >
  <resultMap id="BaseResultMap" type="com.gd.datachx.entity.TRmPayflow" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <result column="com_no" property="comNo" jdbcType="DECIMAL" />
    <result column="flow_id" property="flowId" jdbcType="DECIMAL" />
    <result column="flow_no" property="flowNo" jdbcType="CHAR" />
    <result column="sale_amount" property="saleAmount" jdbcType="DECIMAL" />
    <result column="branch_no" property="branchNo" jdbcType="CHAR" />
    <result column="pay_way" property="payWay" jdbcType="CHAR" />
    <result column="sell_way" property="sellWay" jdbcType="CHAR" />
    <result column="card_no" property="cardNo" jdbcType="VARCHAR" />
    <result column="card_id" property="cardId" jdbcType="VARCHAR" />
    <result column="vip_no" property="vipNo" jdbcType="VARCHAR" />
    <result column="coin_no" property="coinNo" jdbcType="CHAR" />
    <result column="coin_rate" property="coinRate" jdbcType="DECIMAL" />
    <result column="pay_amount" property="payAmount" jdbcType="DECIMAL" />
    <result column="oper_date" property="operDate" jdbcType="TIMESTAMP" />
    <result column="oper_id" property="operId" jdbcType="CHAR" />
    <result column="counter_no" property="counterNo" jdbcType="CHAR" />
    <result column="sale_man" property="saleMan" jdbcType="CHAR" />
    <result column="cashier_no" property="cashierNo" jdbcType="CHAR" />
    <result column="memo" property="memo" jdbcType="VARCHAR" />
    <result column="voucher_no" property="voucherNo" jdbcType="CHAR" />
    <result column="shift_no" property="shiftNo" jdbcType="CHAR" />
    <result column="com_flag" property="comFlag" jdbcType="CHAR" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    <result column="rdm_no" property="rdmNo" jdbcType="VARCHAR" />
  </resultMap>
  <insert id="insert" parameterType="com.gd.datachx.entity.TRmPayflow" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into t_rm_payflow (com_no, flow_id, flow_no, 
      sale_amount, branch_no, pay_way, 
      sell_way, card_no, card_id, 
      vip_no, coin_no, coin_rate, 
      pay_amount, oper_date, oper_id, 
      counter_no, sale_man, cashier_no, 
      memo, voucher_no, shift_no, 
      com_flag, remark, rdm_no
      )
    values (#{comNo,jdbcType=DECIMAL}, #{flowId,jdbcType=DECIMAL}, #{flowNo,jdbcType=CHAR}, 
      #{saleAmount,jdbcType=DECIMAL}, #{branchNo,jdbcType=CHAR}, #{payWay,jdbcType=CHAR}, 
      #{sellWay,jdbcType=CHAR}, #{cardNo,jdbcType=VARCHAR}, #{cardId,jdbcType=VARCHAR}, 
      #{vipNo,jdbcType=VARCHAR}, #{coinNo,jdbcType=CHAR}, #{coinRate,jdbcType=DECIMAL}, 
      #{payAmount,jdbcType=DECIMAL}, #{operDate,jdbcType=TIMESTAMP}, #{operId,jdbcType=CHAR}, 
      #{counterNo,jdbcType=CHAR}, #{saleMan,jdbcType=CHAR}, #{cashierNo,jdbcType=CHAR}, 
      #{memo,jdbcType=VARCHAR}, #{voucherNo,jdbcType=CHAR}, #{shiftNo,jdbcType=CHAR}, 
      #{comFlag,jdbcType=CHAR}, #{remark,jdbcType=VARCHAR}, #{rdmNo,jdbcType=VARCHAR}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.gd.datachx.entity.TRmPayflow" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into t_rm_payflow
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="comNo != null" >
        com_no,
      </if>
      <if test="flowId != null" >
        flow_id,
      </if>
      <if test="flowNo != null" >
        flow_no,
      </if>
      <if test="saleAmount != null" >
        sale_amount,
      </if>
      <if test="branchNo != null" >
        branch_no,
      </if>
      <if test="payWay != null" >
        pay_way,
      </if>
      <if test="sellWay != null" >
        sell_way,
      </if>
      <if test="cardNo != null" >
        card_no,
      </if>
      <if test="cardId != null" >
        card_id,
      </if>
      <if test="vipNo != null" >
        vip_no,
      </if>
      <if test="coinNo != null" >
        coin_no,
      </if>
      <if test="coinRate != null" >
        coin_rate,
      </if>
      <if test="payAmount != null" >
        pay_amount,
      </if>
      <if test="operDate != null" >
        oper_date,
      </if>
      <if test="operId != null" >
        oper_id,
      </if>
      <if test="counterNo != null" >
        counter_no,
      </if>
      <if test="saleMan != null" >
        sale_man,
      </if>
      <if test="cashierNo != null" >
        cashier_no,
      </if>
      <if test="memo != null" >
        memo,
      </if>
      <if test="voucherNo != null" >
        voucher_no,
      </if>
      <if test="shiftNo != null" >
        shift_no,
      </if>
      <if test="comFlag != null" >
        com_flag,
      </if>
      <if test="remark != null" >
        remark,
      </if>
      <if test="rdmNo != null" >
        rdm_no,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="comNo != null" >
        #{comNo,jdbcType=DECIMAL},
      </if>
      <if test="flowId != null" >
        #{flowId,jdbcType=DECIMAL},
      </if>
      <if test="flowNo != null" >
        #{flowNo,jdbcType=CHAR},
      </if>
      <if test="saleAmount != null" >
        #{saleAmount,jdbcType=DECIMAL},
      </if>
      <if test="branchNo != null" >
        #{branchNo,jdbcType=CHAR},
      </if>
      <if test="payWay != null" >
        #{payWay,jdbcType=CHAR},
      </if>
      <if test="sellWay != null" >
        #{sellWay,jdbcType=CHAR},
      </if>
      <if test="cardNo != null" >
        #{cardNo,jdbcType=VARCHAR},
      </if>
      <if test="cardId != null" >
        #{cardId,jdbcType=VARCHAR},
      </if>
      <if test="vipNo != null" >
        #{vipNo,jdbcType=VARCHAR},
      </if>
      <if test="coinNo != null" >
        #{coinNo,jdbcType=CHAR},
      </if>
      <if test="coinRate != null" >
        #{coinRate,jdbcType=DECIMAL},
      </if>
      <if test="payAmount != null" >
        #{payAmount,jdbcType=DECIMAL},
      </if>
      <if test="operDate != null" >
        #{operDate,jdbcType=TIMESTAMP},
      </if>
      <if test="operId != null" >
        #{operId,jdbcType=CHAR},
      </if>
      <if test="counterNo != null" >
        #{counterNo,jdbcType=CHAR},
      </if>
      <if test="saleMan != null" >
        #{saleMan,jdbcType=CHAR},
      </if>
      <if test="cashierNo != null" >
        #{cashierNo,jdbcType=CHAR},
      </if>
      <if test="memo != null" >
        #{memo,jdbcType=VARCHAR},
      </if>
      <if test="voucherNo != null" >
        #{voucherNo,jdbcType=CHAR},
      </if>
      <if test="shiftNo != null" >
        #{shiftNo,jdbcType=CHAR},
      </if>
      <if test="comFlag != null" >
        #{comFlag,jdbcType=CHAR},
      </if>
      <if test="remark != null" >
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="rdmNo != null" >
        #{rdmNo,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <select id="selectOrderDetail" resultMap="BaseResultMap">
    SELECT com_no, flow_id, flow_no, sale_amount, branch_no, pay_way, sell_way, card_no, vip_no, oper_date, pay_amount FROM `t_rm_payflow` WHERE flow_no in (SELECT distinct flow_no FROM t_rm_saleflow)
    <if test="date != null">
      and oper_date >= #{date,jdbcType=TIMESTAMP}
    </if>
    ORDER BY oper_date asc limit 100
  </select>
</mapper>